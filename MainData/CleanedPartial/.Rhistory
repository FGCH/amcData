library(RCurl)
url <- "https://raw.github.com/christophergandrud/amcData/master/MainData/amcData.csv"
main <- getURL(url)
main <- read.csv(textConnection(main))
View(main)
library(ggplot2)
qplot(UDS, AMC geom = "boxplot", data = main)
qplot(UDS, AMC, geom = "boxplot", data = main)
qplot(UDS, AMC, geom = "jitter", data = main)
qplot(UDS, AMC, geom = "point", data = main)
qplot(UDS, AMC, geom = "density", data = main)
qplot(UDS, AMC, geom = "point", data = main)
############
# Clean Up Laeven & Valencia (2012) Banking Crisis Data
# Christopher Gandrud
# Updated 17 July 2012
############
## Laeven & Valencia (2012) data can be found at: http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0
## The data set 'SYSTEMIC BANKING CRISES DATABASE.xlsx' was downloaded.
## The 'Additional Details' sheet was saved as a .csv file called  'LaeValPolicies.csv' in a folder called LavVal2012.
## I hand deleted the heading rows.
# Load required packages
library(stringr)
library(xtable)
library(countrycode)
# Set working directory and load the data.
setwd("/git_repositories/amcData/BaseFiles/LaeVal2012")
# Input data and transform it into long format
restruct <- read.csv("LavValPolicies.csv")
# Take the matrix transpose to reshape the data from wide to long format.
restruct <- t(restruct)
# Remove phantom column
restruct <- restruct[, -26]
# Create list of variables and descriptions
Description <- restruct[1, ]
c <- c("Country")
Description <- append(c, values = Description)
Description <- str_trim(Description)
ColNames <- c("country", "CrisisDate", "CrisisDateSystemic", "CurrencyCrisis", "YearCurrencyCrisis", "SovereignCrisis", "YearSovereignCrisis", "CreditBoom", "CreditorRights", "CreditorRightsIndex", "DepositIns", "YearDICreated", "DICoverageLimit", "DICoverageRatio", "DepositFreeze", "DateDepositFreeze", "DurationDepositFreeze", "TimeDepositsFreeze", "BankHoliday", "DateBankHoliday", "DurationBankHoliday", "BankGuaranteee", "DateBankGuaranteeStart", "DateBankGuaranteeEnd", "BankGuaranteeDuration", "BankGuaranteeCoverage", "EmergencyLending", "DateEmergencyLending", "PeakLendingSupport", "BankRestructuring", "Nationalizations", "AssetPurchases", "AMC", "Recap", "RecapCosts", "RecoveryDummy", "RecoveryProceeds", "GovRecapCosts", "DepositorLosses", "DepositorLosesSeverity", "MonetaryPolicyIndex", "AverageReserveChange", "FiscalPolicyIndex", "IncreasePublicDebt", "IMFProgram", "YearIMFProgram", "PeakNPLs", "NetFiscalCosts", "GrossFiscalCosts", "FiveYearRecovery", "OutputLoss")
# Create table and markdown file of variable descriptions.
VarList <- cbind(ColNames, Description)
VarList <- xtable(VarList)
LvVariableTable <- print(VarList, type = "html")
cat("# Variables Lables and Variable Descriptions for Laeven & Valencia's (2012) Restructuring Data\n ### See: <http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0>\n\n", LvVariableTable, file = "/git_repositories/amcData/MainData/VariableDescriptions/LaevenValenciaVariableDescriptions.md")
# Write new table. I did this to get around a problem correctly naming the reshaped variables.
write.table(restruct, file = "restruct.csv", sep = ",")
# Remove % sign
RestructPercent <- readLines("restruct.csv")
RestructPercent <- gsub("%", "", RestructPercent)
write(RestructPercent, file = "restruct.csv")
restruct <- read.csv("restruct.csv", row.names = NULL, col.names = ColNames)
unlink("restruct.csv")
restruct <- restruct[-1, ]
# Clean up country names and create IMF code indexing
restruct$country <- gsub(".[0-9]", "", restruct$country)
restruct$country <- gsub("\\.", " ", restruct$country)
restruct$imfcode <- countrycode(restruct$country, origin = "country.name", destination = "imf")
# Clean up dates
restruct$CrisisDate[restruct$country == "Sri Lanka"] <- 1989
restruct$CrisisDate <- gsub("1988", "Jan-88", restruct$CrisisDate)
restruct$CrisisDate <- gsub("1989", "Jan-89", restruct$CrisisDate)
restruct$CrisisDate <- paste(restruct$CrisisDate, "-01", sep = "")
restruct$CrisisDate <- as.Date(restruct$CrisisDate, "%b-%y-%d")
restruct$year <- as.numeric(str_extract(restruct$CrisisDate, "[0-9][0-9][0-9][0-9]"))
# Clean up DICoverageLimit variable values
restruct$DICoverageLimit <- gsub(",", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("-", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("Unlimited", "Full", restruct$DICoverageLimit)
# Recode AMC variable
restruct$AMC <- as.numeric(restruct$AMC)
restruct$AMCType[restruct$AMC == 1] <- "None"
restruct$AMCType[restruct$AMC == 2] <- "Centralised"
restruct$AMCType[restruct$AMC == 3] <- "Decentralised"
restruct$AMC[restruct$AMC == 1] <- "NoAMC"
restruct$AMC[restruct$AMC > 0] <- "AMCCreated"
?source
#########
# Make amcData Data Set
# Christopher Gandrud
# Updated 17 July 2012
#########
# Set working directory
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("LV_Data_Clean.R")
source("AddDPIVariables.R")
source("AddUDSVariables.R")
source("MergeCleaned.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
getwd
getwd()
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("LV_Data_Clean.R")
source("AddDPIVariables.R")
#########
# Make amcData Data Set
# Christopher Gandrud
# Updated 17 July 2012
#########
# Set working directory
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("LV_Data_Clean.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("AddDPIVariables.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("AddUDSVariables.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("MergeCleaned.R")
#########
# Make amcData Data Set
# Christopher Gandrud
# Updated 17 July 2012
#########
# Set working directory
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("LV_Data_Clean.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("AddDPIVariables.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("AddUDSVariables.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("MergeCleaned.R")
View(amcData)
?write.table
write.table(amcData, file = "/git_repositories/amcData/MainData/amcData.csv", sep = ",", row.names = FALSE)
write.table(amcData, file = "/git_repositories/amcData/MainData/amcData.csv", sep = ",", row.names = FALSE)
# Load data from the GitHub site
url <- "https://raw.github.com/christophergandrud/amcData/master/MainData/amcData.csv"
main <- getURL(url)
main <- read.csv(textConnection(main))
# Basic Boxplots
qplot(UDS, AMC, geom = "point", data = main)
############
# Clean Up Laeven & Valencia (2012) Banking Crisis Data
# Christopher Gandrud
# Updated 17 July 2012
############
## Laeven & Valencia (2012) data can be found at: http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0
## The data set 'SYSTEMIC BANKING CRISES DATABASE.xlsx' was downloaded.
## The 'Additional Details' sheet was saved as a .csv file called  'LaeValPolicies.csv' in a folder called LavVal2012.
## I hand deleted the heading rows.
# Load required packages
library(stringr)
library(xtable)
library(countrycode)
# Set working directory and load the data.
setwd("/git_repositories/amcData/BaseFiles/LaeVal2012")
# Input data and transform it into long format
restruct <- read.csv("LavValPolicies.csv")
# Take the matrix transpose to reshape the data from wide to long format.
restruct <- t(restruct)
# Remove phantom column
restruct <- restruct[, -26]
# Create list of variables and descriptions
Description <- restruct[1, ]
c <- c("Country")
Description <- append(c, values = Description)
Description <- str_trim(Description)
ColNames <- c("country", "CrisisDate", "CrisisDateSystemic", "CurrencyCrisis", "YearCurrencyCrisis", "SovereignCrisis", "YearSovereignCrisis", "CreditBoom", "CreditorRights", "CreditorRightsIndex", "DepositIns", "YearDICreated", "DICoverageLimit", "DICoverageRatio", "DepositFreeze", "DateDepositFreeze", "DurationDepositFreeze", "TimeDepositsFreeze", "BankHoliday", "DateBankHoliday", "DurationBankHoliday", "BankGuaranteee", "DateBankGuaranteeStart", "DateBankGuaranteeEnd", "BankGuaranteeDuration", "BankGuaranteeCoverage", "EmergencyLending", "DateEmergencyLending", "PeakLendingSupport", "BankRestructuring", "Nationalizations", "AssetPurchases", "AMC", "Recap", "RecapCosts", "RecoveryDummy", "RecoveryProceeds", "GovRecapCosts", "DepositorLosses", "DepositorLosesSeverity", "MonetaryPolicyIndex", "AverageReserveChange", "FiscalPolicyIndex", "IncreasePublicDebt", "IMFProgram", "YearIMFProgram", "PeakNPLs", "NetFiscalCosts", "GrossFiscalCosts", "FiveYearRecovery", "OutputLoss")
# Create table and markdown file of variable descriptions.
VarList <- cbind(ColNames, Description)
VarList <- xtable(VarList)
LvVariableTable <- print(VarList, type = "html")
cat("# Variables Lables and Variable Descriptions for Laeven & Valencia's (2012) Restructuring Data\n ### See: <http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0>\n\n", LvVariableTable, file = "/git_repositories/amcData/MainData/VariableDescriptions/LaevenValenciaVariableDescriptions.md")
# Write new table. I did this to get around a problem correctly naming the reshaped variables.
write.table(restruct, file = "restruct.csv", sep = ",")
# Remove % sign
RestructPercent <- readLines("restruct.csv")
RestructPercent <- gsub("%", "", RestructPercent)
write(RestructPercent, file = "restruct.csv")
restruct <- read.csv("restruct.csv", row.names = NULL, col.names = ColNames)
unlink("restruct.csv")
restruct <- restruct[-1, ]
# Clean up country names and create IMF code indexing
restruct$country <- gsub(".[0-9]", "", restruct$country)
restruct$country <- gsub("\\.", " ", restruct$country)
restruct$imfcode <- countrycode(restruct$country, origin = "country.name", destination = "imf")
# Clean up dates
restruct$CrisisDate[restruct$country == "Sri Lanka"] <- 1989
restruct$CrisisDate <- gsub("1988", "Jan-88", restruct$CrisisDate)
restruct$CrisisDate <- gsub("1989", "Jan-89", restruct$CrisisDate)
restruct$CrisisDate <- paste(restruct$CrisisDate, "-01", sep = "")
restruct$CrisisDate <- as.Date(restruct$CrisisDate, "%b-%y-%d")
restruct$year <- as.numeric(str_extract(restruct$CrisisDate, "[0-9][0-9][0-9][0-9]"))
# Clean up DICoverageLimit variable values
restruct$DICoverageLimit <- gsub(",", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("-", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("Unlimited", "Full", restruct$DICoverageLimit)
# Recode AMC variable
restruct$AMC <- as.numeric(restruct$AMC)
restruct$AMCType[restruct$AMC == 1] <- "None"
restruct$AMCType[restruct$AMC == 2] <- "Centralised"
restruct$AMCType[restruct$AMC == 3] <- "Decentralised"
View(restruct)
restruct$AMC[restruct$AMC == 1] <- "NoAMC"
restruct$AMC[restruct$AMC  > 1] <- "AMCEstablished"
View(restruct)
############
# Clean Up Laeven & Valencia (2012) Banking Crisis Data
# Christopher Gandrud
# Updated 17 July 2012
############
## Laeven & Valencia (2012) data can be found at: http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0
## The data set 'SYSTEMIC BANKING CRISES DATABASE.xlsx' was downloaded.
## The 'Additional Details' sheet was saved as a .csv file called  'LaeValPolicies.csv' in a folder called LavVal2012.
## I hand deleted the heading rows.
# Load required packages
library(stringr)
library(xtable)
library(countrycode)
# Set working directory and load the data.
setwd("/git_repositories/amcData/BaseFiles/LaeVal2012")
# Input data and transform it into long format
restruct <- read.csv("LavValPolicies.csv")
# Take the matrix transpose to reshape the data from wide to long format.
restruct <- t(restruct)
# Remove phantom column
restruct <- restruct[, -26]
# Create list of variables and descriptions
Description <- restruct[1, ]
c <- c("Country")
Description <- append(c, values = Description)
Description <- str_trim(Description)
ColNames <- c("country", "CrisisDate", "CrisisDateSystemic", "CurrencyCrisis", "YearCurrencyCrisis", "SovereignCrisis", "YearSovereignCrisis", "CreditBoom", "CreditorRights", "CreditorRightsIndex", "DepositIns", "YearDICreated", "DICoverageLimit", "DICoverageRatio", "DepositFreeze", "DateDepositFreeze", "DurationDepositFreeze", "TimeDepositsFreeze", "BankHoliday", "DateBankHoliday", "DurationBankHoliday", "BankGuaranteee", "DateBankGuaranteeStart", "DateBankGuaranteeEnd", "BankGuaranteeDuration", "BankGuaranteeCoverage", "EmergencyLending", "DateEmergencyLending", "PeakLendingSupport", "BankRestructuring", "Nationalizations", "AssetPurchases", "AMC", "Recap", "RecapCosts", "RecoveryDummy", "RecoveryProceeds", "GovRecapCosts", "DepositorLosses", "DepositorLosesSeverity", "MonetaryPolicyIndex", "AverageReserveChange", "FiscalPolicyIndex", "IncreasePublicDebt", "IMFProgram", "YearIMFProgram", "PeakNPLs", "NetFiscalCosts", "GrossFiscalCosts", "FiveYearRecovery", "OutputLoss")
# Create table and markdown file of variable descriptions.
VarList <- cbind(ColNames, Description)
VarList <- xtable(VarList)
LvVariableTable <- print(VarList, type = "html")
cat("# Variables Lables and Variable Descriptions for Laeven & Valencia's (2012) Restructuring Data\n ### See: <http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0>\n\n", LvVariableTable, file = "/git_repositories/amcData/MainData/VariableDescriptions/LaevenValenciaVariableDescriptions.md")
# Write new table. I did this to get around a problem correctly naming the reshaped variables.
write.table(restruct, file = "restruct.csv", sep = ",")
# Remove % sign
RestructPercent <- readLines("restruct.csv")
RestructPercent <- gsub("%", "", RestructPercent)
write(RestructPercent, file = "restruct.csv")
restruct <- read.csv("restruct.csv", row.names = NULL, col.names = ColNames)
unlink("restruct.csv")
restruct <- restruct[-1, ]
# Clean up country names and create IMF code indexing
restruct$country <- gsub(".[0-9]", "", restruct$country)
restruct$country <- gsub("\\.", " ", restruct$country)
restruct$imfcode <- countrycode(restruct$country, origin = "country.name", destination = "imf")
# Clean up dates
restruct$CrisisDate[restruct$country == "Sri Lanka"] <- 1989
restruct$CrisisDate <- gsub("1988", "Jan-88", restruct$CrisisDate)
restruct$CrisisDate <- gsub("1989", "Jan-89", restruct$CrisisDate)
restruct$CrisisDate <- paste(restruct$CrisisDate, "-01", sep = "")
restruct$CrisisDate <- as.Date(restruct$CrisisDate, "%b-%y-%d")
restruct$year <- as.numeric(str_extract(restruct$CrisisDate, "[0-9][0-9][0-9][0-9]"))
# Clean up DICoverageLimit variable values
restruct$DICoverageLimit <- gsub(",", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("-", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("Unlimited", "Full", restruct$DICoverageLimit)
# Recode AMC variable
restruct$AMC <- as.numeric(restruct$AMC)
restruct$AMCType[restruct$AMC == 1] <- "None"
restruct$AMCType[restruct$AMC == 2] <- "Centralised"
restruct$AMCType[restruct$AMC == 3] <- "Decentralised"
restruct$AMC[restruct$AMC == 1] <- "NoAMC"
?as.factor
############
# Clean Up Laeven & Valencia (2012) Banking Crisis Data
# Christopher Gandrud
# Updated 17 July 2012
############
## Laeven & Valencia (2012) data can be found at: http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0
## The data set 'SYSTEMIC BANKING CRISES DATABASE.xlsx' was downloaded.
## The 'Additional Details' sheet was saved as a .csv file called  'LaeValPolicies.csv' in a folder called LavVal2012.
## I hand deleted the heading rows.
# Load required packages
library(stringr)
library(xtable)
library(countrycode)
# Set working directory and load the data.
setwd("/git_repositories/amcData/BaseFiles/LaeVal2012")
# Input data and transform it into long format
restruct <- read.csv("LavValPolicies.csv")
# Take the matrix transpose to reshape the data from wide to long format.
restruct <- t(restruct)
# Remove phantom column
restruct <- restruct[, -26]
# Create list of variables and descriptions
Description <- restruct[1, ]
c <- c("Country")
Description <- append(c, values = Description)
Description <- str_trim(Description)
ColNames <- c("country", "CrisisDate", "CrisisDateSystemic", "CurrencyCrisis", "YearCurrencyCrisis", "SovereignCrisis", "YearSovereignCrisis", "CreditBoom", "CreditorRights", "CreditorRightsIndex", "DepositIns", "YearDICreated", "DICoverageLimit", "DICoverageRatio", "DepositFreeze", "DateDepositFreeze", "DurationDepositFreeze", "TimeDepositsFreeze", "BankHoliday", "DateBankHoliday", "DurationBankHoliday", "BankGuaranteee", "DateBankGuaranteeStart", "DateBankGuaranteeEnd", "BankGuaranteeDuration", "BankGuaranteeCoverage", "EmergencyLending", "DateEmergencyLending", "PeakLendingSupport", "BankRestructuring", "Nationalizations", "AssetPurchases", "AMC", "Recap", "RecapCosts", "RecoveryDummy", "RecoveryProceeds", "GovRecapCosts", "DepositorLosses", "DepositorLosesSeverity", "MonetaryPolicyIndex", "AverageReserveChange", "FiscalPolicyIndex", "IncreasePublicDebt", "IMFProgram", "YearIMFProgram", "PeakNPLs", "NetFiscalCosts", "GrossFiscalCosts", "FiveYearRecovery", "OutputLoss")
# Create table and markdown file of variable descriptions.
VarList <- cbind(ColNames, Description)
VarList <- xtable(VarList)
LvVariableTable <- print(VarList, type = "html")
cat("# Variables Lables and Variable Descriptions for Laeven & Valencia's (2012) Restructuring Data\n ### See: <http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0>\n\n", LvVariableTable, file = "/git_repositories/amcData/MainData/VariableDescriptions/LaevenValenciaVariableDescriptions.md")
# Write new table. I did this to get around a problem correctly naming the reshaped variables.
write.table(restruct, file = "restruct.csv", sep = ",")
# Remove % sign
RestructPercent <- readLines("restruct.csv")
RestructPercent <- gsub("%", "", RestructPercent)
write(RestructPercent, file = "restruct.csv")
restruct <- read.csv("restruct.csv", row.names = NULL, col.names = ColNames)
unlink("restruct.csv")
restruct <- restruct[-1, ]
# Clean up country names and create IMF code indexing
restruct$country <- gsub(".[0-9]", "", restruct$country)
restruct$country <- gsub("\\.", " ", restruct$country)
restruct$imfcode <- countrycode(restruct$country, origin = "country.name", destination = "imf")
# Clean up dates
restruct$CrisisDate[restruct$country == "Sri Lanka"] <- 1989
restruct$CrisisDate <- gsub("1988", "Jan-88", restruct$CrisisDate)
restruct$CrisisDate <- gsub("1989", "Jan-89", restruct$CrisisDate)
restruct$CrisisDate <- paste(restruct$CrisisDate, "-01", sep = "")
restruct$CrisisDate <- as.Date(restruct$CrisisDate, "%b-%y-%d")
restruct$year <- as.numeric(str_extract(restruct$CrisisDate, "[0-9][0-9][0-9][0-9]"))
# Clean up DICoverageLimit variable values
restruct$DICoverageLimit <- gsub(",", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("-", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("Unlimited", "Full", restruct$DICoverageLimit)
# Recode AMC variable
restruct$AMC <- as.numeric(restruct$AMC)
restruct$AMCType[restruct$AMC == 1] <- "None"
restruct$AMCType[restruct$AMC == 2] <- "Centralised"
restruct$AMCType[restruct$AMC == 3] <- "Decentralised"
restruct$AMC[restruct$AMC > 1] <- 2
View(restruct)
restruct$AMC <- as.factor(restruct$AMC, levels = c(1, 2), labels = c("NoAMC", "AMCEstablished"))
restruct$AMC <- as.factor(restruct$AMC, labels = c("NoAMC", "AMCEstablished"))
restruct$AMC <- as.factor(restruct$AMC)
str(restruct$AMC)
#########
# Make amcData Data Set
# Christopher Gandrud
# Updated 17 July 2012
#########
# Set working directory
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("LV_Data_Clean.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("AddDPIVariables.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("AddUDSVariables.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("MergeCleaned.R")
url <- "https://raw.github.com/christophergandrud/amcData/master/MainData/amcData.csv"
main <- getURL(url)
main <- read.csv(textConnection(main))
# Basic Boxplots
qplot(UDS, AMC, geom = "point", data = main)
str(main$AMC)
# Load data from the GitHub site
url <- "https://raw.github.com/christophergandrud/amcData/master/MainData/amcData.csv"
main <- getURL(url)
main <- read.csv(textConnection(main))
# Basic Boxplots
qplot(UDS, AMC, geom = "point", data = main)
main$AMC <- factor(main$AMC, lables = c("No AMC", "AMC Created"))
main$AMC <- factor(main$AMC, labels = c("No AMC", "AMC Created"))
qplot(UDS, AMC, geom = "point", data = main)
############
# Clean Up Laeven & Valencia (2012) Banking Crisis Data
# Christopher Gandrud
# Updated 17 July 2012
############
## Laeven & Valencia (2012) data can be found at: http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0
## The data set 'SYSTEMIC BANKING CRISES DATABASE.xlsx' was downloaded.
## The 'Additional Details' sheet was saved as a .csv file called  'LaeValPolicies.csv' in a folder called LavVal2012.
## I hand deleted the heading rows.
# Load required packages
library(stringr)
library(xtable)
library(countrycode)
# Set working directory and load the data.
setwd("/git_repositories/amcData/BaseFiles/LaeVal2012")
# Input data and transform it into long format
restruct <- read.csv("LavValPolicies.csv")
# Take the matrix transpose to reshape the data from wide to long format.
restruct <- t(restruct)
# Remove phantom column
restruct <- restruct[, -26]
# Create list of variables and descriptions
Description <- restruct[1, ]
c <- c("Country")
Description <- append(c, values = Description)
Description <- str_trim(Description)
ColNames <- c("country", "CrisisDate", "CrisisDateSystemic", "CurrencyCrisis", "YearCurrencyCrisis", "SovereignCrisis", "YearSovereignCrisis", "CreditBoom", "CreditorRights", "CreditorRightsIndex", "DepositIns", "YearDICreated", "DICoverageLimit", "DICoverageRatio", "DepositFreeze", "DateDepositFreeze", "DurationDepositFreeze", "TimeDepositsFreeze", "BankHoliday", "DateBankHoliday", "DurationBankHoliday", "BankGuaranteee", "DateBankGuaranteeStart", "DateBankGuaranteeEnd", "BankGuaranteeDuration", "BankGuaranteeCoverage", "EmergencyLending", "DateEmergencyLending", "PeakLendingSupport", "BankRestructuring", "Nationalizations", "AssetPurchases", "AMC", "Recap", "RecapCosts", "RecoveryDummy", "RecoveryProceeds", "GovRecapCosts", "DepositorLosses", "DepositorLosesSeverity", "MonetaryPolicyIndex", "AverageReserveChange", "FiscalPolicyIndex", "IncreasePublicDebt", "IMFProgram", "YearIMFProgram", "PeakNPLs", "NetFiscalCosts", "GrossFiscalCosts", "FiveYearRecovery", "OutputLoss")
# Create table and markdown file of variable descriptions.
VarList <- cbind(ColNames, Description)
VarList <- xtable(VarList)
LvVariableTable <- print(VarList, type = "html")
cat("# Variables Lables and Variable Descriptions for Laeven & Valencia's (2012) Restructuring Data\n ### See: <http://www.imf.org/external/pubs/cat/longres.aspx?sk=26015.0>\n\n", LvVariableTable, file = "/git_repositories/amcData/MainData/VariableDescriptions/LaevenValenciaVariableDescriptions.md")
# Write new table. I did this to get around a problem correctly naming the reshaped variables.
write.table(restruct, file = "restruct.csv", sep = ",")
# Remove % sign
RestructPercent <- readLines("restruct.csv")
RestructPercent <- gsub("%", "", RestructPercent)
write(RestructPercent, file = "restruct.csv")
restruct <- read.csv("restruct.csv", row.names = NULL, col.names = ColNames)
unlink("restruct.csv")
restruct <- restruct[-1, ]
# Clean up country names and create IMF code indexing
restruct$country <- gsub(".[0-9]", "", restruct$country)
restruct$country <- gsub("\\.", " ", restruct$country)
restruct$imfcode <- countrycode(restruct$country, origin = "country.name", destination = "imf")
# Clean up dates
restruct$CrisisDate[restruct$country == "Sri Lanka"] <- 1989
restruct$CrisisDate <- gsub("1988", "Jan-88", restruct$CrisisDate)
restruct$CrisisDate <- gsub("1989", "Jan-89", restruct$CrisisDate)
restruct$CrisisDate <- paste(restruct$CrisisDate, "-01", sep = "")
restruct$CrisisDate <- as.Date(restruct$CrisisDate, "%b-%y-%d")
restruct$year <- as.numeric(str_extract(restruct$CrisisDate, "[0-9][0-9][0-9][0-9]"))
# Clean up DICoverageLimit variable values
restruct$DICoverageLimit <- gsub(",", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("-", "", restruct$DICoverageLimit)
restruct$DICoverageLimit <- gsub("Unlimited", "Full", restruct$DICoverageLimit)
# Recode AMC variable
restruct$AMC <- as.numeric(restruct$AMC)
restruct$AMCType[restruct$AMC == 1] <- "None"
restruct$AMCType[restruct$AMC == 2] <- "Centralised"
restruct$AMCType[restruct$AMC == 3] <- "Decentralised"
restruct$AMC[restruct$AMC > 1] <- 2
restruct$AMC <- factor(restruct$AMC, labels = c("No AMC", "AMC Created")
)
View(restruct)
#########
# Make amcData Data Set
# Christopher Gandrud
# Updated 17 July 2012
#########
# Set working directory
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("LV_Data_Clean.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("AddDPIVariables.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("AddUDSVariables.R")
setwd("/git_repositories/amcData/SourceCode/DataCreation/")
source("MergeCleaned.R")
#########
# Exploritory AMC Analysis
# Christopher Gandrud
# Updated 17 July 2012
#########
# Load required packages
library(RCurl)
library(ggplot2)
# Load data from the GitHub site
url <- "https://raw.github.com/christophergandrud/amcData/master/MainData/amcData.csv"
main <- getURL(url)
main <- read.csv(textConnection(main))
# Basic Boxplots
qplot(UDS, AMC, geom = "point", data = main)
# Load data from the GitHub site
url <- "https://raw.github.com/christophergandrud/amcData/master/MainData/amcData.csv"
main <- getURL(url)
main <- read.csv(textConnection(main))
# Basic Boxplots
qplot(UDS, AMC, geom = "point", data = main)
qplot(AMC, UDS geom = "boxplot", data = main)
qplot(AMC, UDS, geom = "boxplot", data = main)
install.packages(c("knitr", "statnet"))
